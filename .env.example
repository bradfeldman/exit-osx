# ===========================================
# Exit OSx Environment Configuration
# ===========================================
# Copy this file to .env.local and fill in your values.
# Never commit real credentials to version control.
#
# ENV FILE GUIDE:
#   .env.local        — Local dev (loaded by `next dev`). Points to STAGING db.
#   .env.staging      — Vercel preview/staging pull. Same db as .env.local + Vercel metadata.
#   .env.production   — Vercel production pull. LIVE database — use with caution.
#   .env.example      — This file. Template with placeholder values.
#
# To pull fresh env vars from Vercel:
#   vercel env pull .env.local          (staging/preview)
#   vercel env pull .env.production --environment=production
#   vercel env pull .env.staging --environment=preview
# ===========================================

# Supabase Auth
# Get these from: https://supabase.com/dashboard/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Database - Prisma
# Get connection strings from: https://supabase.com/dashboard/project/_/settings/database

# Transaction pooler for serverless queries (port 6543)
DATABASE_URL="postgresql://postgres.your-project:your-password@aws-1-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Session pooler for migrations (port 5432)
DIRECT_URL="postgresql://postgres.your-project:your-password@aws-1-us-east-1.pooler.supabase.com:5432/postgres"

# ===========================================
# Security Configuration (REQUIRED)
# ===========================================

# SECURITY: Secret for signing admin impersonation JWT tokens
# Generate with: openssl rand -base64 32
# CRITICAL: Must be at least 32 characters. App will fail to start without this.
IMPERSONATION_SECRET=your-impersonation-secret-min-32-chars

# SECURITY: Secret for signing OAuth state parameters (QuickBooks, etc.)
# Generate with: openssl rand -base64 32
# If not set, falls back to IMPERSONATION_SECRET
OAUTH_STATE_SECRET=your-oauth-state-secret-min-32-chars

# SECURITY: Secret for encrypting TOTP secrets for two-factor authentication
# Generate with: openssl rand -base64 32
# Required if you enable 2FA functionality
TOTP_ENCRYPTION_KEY=your-totp-encryption-key-min-32-chars

# ===========================================
# Redis Configuration (Production)
# ===========================================
# Redis is required for distributed rate limiting and account lockout
# in multi-instance deployments. Without Redis, these features use
# in-memory storage which won't work correctly across server instances.

# REDIS_URL=redis://localhost:6379
# REDIS_URL=rediss://user:password@your-redis-host:6379

# ===========================================
# CAPTCHA Configuration (Optional)
# ===========================================
# CAPTCHA is shown after multiple failed login attempts
# Supports hCaptcha (recommended) or reCAPTCHA

# hCaptcha (https://www.hcaptcha.com/)
# NEXT_PUBLIC_HCAPTCHA_SITE_KEY=your-hcaptcha-site-key
# HCAPTCHA_SECRET_KEY=your-hcaptcha-secret-key

# Google reCAPTCHA v2 (https://www.google.com/recaptcha/)
# NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your-recaptcha-site-key
# RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key

# ===========================================
# Third-Party Integrations
# ===========================================

# QuickBooks Integration
# Get credentials from: https://developer.intuit.com/app/developer/dashboard
# QUICKBOOKS_CLIENT_ID=your-quickbooks-client-id
# QUICKBOOKS_CLIENT_SECRET=your-quickbooks-client-secret
# QUICKBOOKS_REDIRECT_URI=http://localhost:3000/api/integrations/quickbooks/callback
# QUICKBOOKS_ENVIRONMENT=sandbox

# OpenAI (for AI-powered features)
# Get API key from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-api-key

# Anthropic (for AI-powered operations diagnosis)
# Get API key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# Resend (for transactional emails)
# Get API key from: https://resend.com/api-keys
# RESEND_API_KEY=re_your-resend-api-key
# RESEND_FROM_EMAIL=Exit OSx <noreply@yourdomain.com>

# ===========================================
# Analytics Configuration
# ===========================================

# Google Tag Manager
# Get container ID from: https://tagmanager.google.com/
# NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX

# Google Analytics 4 (alternative to GTM)
# Get measurement ID from: https://analytics.google.com/
# NEXT_PUBLIC_GA4_MEASUREMENT_ID=G-XXXXXXXXXX

# GA4 Measurement Protocol API Secret (for server-side events)
# Generate from: GA4 Admin > Data Streams > Measurement Protocol API secrets
# GA4_API_SECRET=your-api-secret

# ===========================================
# Optional Configuration
# ===========================================

# App URL (used for email links, etc.)
# NEXT_PUBLIC_APP_URL=https://app.exitosx.com

# Environment identifier
# NODE_ENV=production

# SECURITY: Enable developer/debug endpoints in production (staging environments only)
# Set to "true" ONLY for staging environments. Never enable in production.
# ENABLE_DEV_ENDPOINTS=false
